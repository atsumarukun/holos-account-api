# 概要

アカウント機能を作成する.

# 対象範囲

## 達成基準

- アカウント作成用エンドポイントが作成されている
- アカウント更新用エンドポイントが作成されている
- アカウント削除用エンドポイントが作成されている

## 除外項目

- 認証機能の対応は行わない

# 利用方法

## エンドポイント

| パス | メソッド | 備考 |
| --- | --- | --- |
| /accounts | POST | アカウント作成 |
| /accounts | DELETE | アカウント削除 |
| /accounts/name | PUT | アカウント名更新 |
| /accounts/password | PUT | パスワード更新 |

# 詳細設計

## 要件

- アカウント名とパスワードでアカウントの作成を行う
- ログイン状態でアカウントの更新が行える
  - アカウント名の更新とパスワードの更新は別々に行う
- ログイン状態でアカウントの削除が行える

## 仕様

- アカウント名は3文字以上24文字以下かつローマ字, 数字, アンダースコアのみ
- アカウント名は重複できない
- パスワードは8文字以上72文字以下かつローマ字, 数字, 記号のみ
- パスワードと確認用パスワードを受け取り、一致しなければ作成は失敗する
- パスワードはハッシュ化された値が永続化される

## ドメインオブジェクト

| キー | 型 | 備考 |
| --- | --- | --- |
| id | uuid | |
| name | string | 3文字以上24文字以下<br />ローマ字, 数字, アンダースコアのみ |
| password | string | 8文字以上72文字以下<br />ローマ字, 数字, 記号のみ |

## テーブル

| カラム名 | 型 | キー | null許容 | 備考 |
| --- | --- | --- | :---: | --- |
| id | char(36) | PK | | ID |
| name | varchar(24) | UQ | | アカウント名 |
| password | varchar(60) | | | パスワード |
| created_at | datetime(6) | | | 作成日時 |
| updated_at | datetime(6) | | | 更新日時 |
| deleter_at | datetime(6) | | * | 削除日時 |

## テスト項目

### アカウント名

#### 有効値判定

| ステータス | テストケース | 入力値 |
| --- | --- | --- |
| 正常系 | 小文字のローマ字のみ | name |
| 正常系 | 大文字のローマ字のみ | NAME |
| 正常系 | 数字のみ | 1234 |
| 正常系 | 小文字, 大文字, 数字の混在 | accountName01 |
| 正常系 | アンダースコアが含まれる | account_name |
| 異常系 | ひらがな | なまえ |
| 異常系 | カタカナ | ナマエ |
| 異常系 | 漢字 | 名前 |
| 異常系 | ハイフンが含まれる | account-name |
| 異常系 | 2文字 | strings.Repeat("a", 2) |
| 正常系 | 3文字 | strings.Repeat("a", 3) |
| 正常系 | 24文字 | strings.Repeat("a", 24) |
| 異常系 | 25文字 | strings.Repeat("a", 25) |

#### 重複判定

| ステータス | テストケース | 入力値 |
| --- | --- | --- |
| 正常系 | アカウントが存在しない | 重複確認mockの戻り値がfalse |
| 異常系 | アカウントが存在する | 重複確認mockの戻り値がtrue |

### パスワード

#### 有効値判定

| ステータス | テストケース | 入力値 |
| --- | --- | --- |
| 正常系 | 小文字のローマ字のみ | password |
| 正常系 | 大文字のローマ字のみ | PASSWORD |
| 正常系 | 数字のみ | 12345678 |
| 正常系 | 小文字, 大文字, 数字の混在 | accountPassword01 |
| 正常系 | キーワード全種類 | !@#$%^&*()_-+=[]{};:'\",.<>?/|~ |
| 異常系 | ひらがな | ぱすわーどぱすわーど |
| 異常系 | カタカナ | パスワードパスワード |
| 異常系 | 漢字 | 暗証番号暗証番号 |
| 異常系 | 7文字 | strings.Repeat("a", 7) |
| 正常系 | 8文字 | strings.Repeat("a", 8) |
| 正常系 | 72文字 | strings.Repeat("a", 72) |
| 異常系 | 73文字 | strings.Repeat("a", 73) |

#### 一致判定

| ステータス | テストケース | 入力値 |
| --- | --- | --- |
| 正常系 | パスワードと確認用パスワードが一致 | パスワード: password<br />確認用パスワード: password |
| 異常系 | パスワードと確認用パスワードが不一致 | パスワード: password<br />確認用パスワード: PASSWORD |

# その他の手法

# 参考文献

# 変更履歴

| 変更日 | 変更者 | 変更内容 |
| --- | --- | --- |
| 2025/03/16 | @atsumarukun | 初版 |
